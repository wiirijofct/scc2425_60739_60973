config:
  target: http://127.0.0.1:8080/tukano/rest
  phases:
    - duration: 14
      arrivalRate: 1
  payload:
    path: ./data/users.csv
    order: sequence
    skipHeader: true
    delimiter: ","
    fields:
      - "userId"
      - "pwd"
scenarios:
  - name: CreateShorts
    flow:
      - post:
          url: "/shorts/{{ userId }}"
          headers:
            Content-Type: application/json
          qs:
            pwd: "{{ pwd }}"
          capture:
            - json: "$.shortId"    # Capture the shortId from the response
              as: shortId
            - json: "$.blobUrl"     # Capture blobUrl to use in blob testing
              as: blobUrl

      - log: "{{ shortId }},{{ blobUrl }}"
